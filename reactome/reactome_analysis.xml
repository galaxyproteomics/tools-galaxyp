<tool id="reactome_analysis" name="Reactome Analysis Tools" version="0.1.0">
    <description>query Reactome with your IDs list
    </description>
    <requirements>
    </requirements>
    <stdio>
        <exit_code range="1:" />
    </stdio>
    <command><![CDATA[
        #if $opt.input == "text"
            python $__tool_directory__/reactome_analysis.py --json "$opt.list" "list" --output "$output" --trash "$trash"
        #else if $opt.input == "file"
            python $__tool_directory__/reactome_analysis.py --json "$opt.file" "file" $opt.header $opt.ncol --output "$output" --trash "$trash"
        #end if
        
    ]]></command>
    <inputs>
        <conditional name="opt">
            <param name="input" type="select" label="Input identifiers" multiple="False" >
                <option value="text">Copy/paste your list of IDs </option>
                <!--option value="file">Choose a single-column file </option-->
		        <option value="file">Choose a multiple-columns file </option>
            </param>
            <when value="text" >
                <param name="list" type="text" label="Enter list of identifiers" />
            </when>
            <!--when value="file" >
                <param name="idfile" type="data" format="txt" label="Choose a single-column file" />
            </when-->
            <when value="file" >
                <param name="file" type="data" format="txt, tabular" label="Choose a multiple-columns file" help="Input file is a tab-delimited file containing different information of proteins, such as an output of MaxQuant software" />
                <param name="header" type="boolean" checked="true" truevalue="true" falsevalue="false" label="Does your input file contain header?" />
		        <param type="text" name="ncol" value="c1" label="Please specify the column where you would like to apply the comparison" help ='For example, fill in "c1" if you want to filter the first column' />
            </when>
            
        </conditional>
    </inputs>
    <outputs>
        <data name="output" format="html" label="" />
        <data name="trash" format="tabular" label="Invalid identifiers" />
    </outputs>
    <tests>
        <test>
            <conditional name="opt" >
                <param name="input" value="mq" />
                <param name="file" value="UnipIDs.txt" />
                <param name="header" value="false" />
                <param name="ncol" value="c1" />
            </conditional>
            <output name="output" file="reactome_output.html" ftype="html" />
            <output name="trash" file="reactome_invalide_ids.txt" ftype="tab" />
        </test>
    </tests>
    <help><![CDATA[
Reactome software provides service of creating diagram representing the relations between the biological processes. This tool allows linking to Reactome web service with pre-loaded data from a list of IDs, a file containing IDs or from a column of a complexed file.

**For the rows that have more than 1 ID, only the first one is taken into account**

**This tool only accepts letters (a-z or A-Z), numbers (0-9) and 3 characters "." "-" "_" for IDs. If there is ID containing other than these characters, it will be removed from the queue and placed in "Invalid identifiers" file**
    ]]></help>
    <citations>
    </citations>
</tool>
