<?xml version='1.0' encoding='UTF-8'?>
<!--This is a configuration file for the integration of a tools into Galaxy (https://galaxyproject.org/). This file was automatically generated using CTDConverter.-->
<!--Proposed Tool Section: [Utilities]-->
<tool id="OpenSwathWorkflow" name="OpenSwathWorkflow" version="@TOOL_VERSION@+galaxy@GALAXY_VERSION@" profile="20.05">
  <description>Complete workflow to run OpenSWATH</description>
  <macros>
    <token name="@EXECUTABLE@">OpenSwathWorkflow</token>
    <import>macros.xml</import>
    <import>macros_autotest.xml</import>
    <import>macros_test.xml</import>
  </macros>
  <expand macro="requirements"/>
  <expand macro="stdio"/>
  <command detect_errors="exit_code"><![CDATA[@QUOTE_FOO@
@EXT_FOO@
#import re

## Preprocessing
mkdir in &&
ln -s '$in' 'in/${re.sub("[^\w\-_]", "_", $in.element_identifier)}.$gxy2omsext($in.ext)' &&
mkdir tr &&
ln -s '$tr' 'tr/${re.sub("[^\w\-_]", "_", $tr.element_identifier)}.$gxy2omsext($tr.ext)' &&
#if $tr_irt:
  mkdir tr_irt &&
  ln -s '$tr_irt' 'tr_irt/${re.sub("[^\w\-_]", "_", $tr_irt.element_identifier)}.$gxy2omsext($tr_irt.ext)' &&
#end if
#if $tr_irt_nonlinear:
  mkdir tr_irt_nonlinear &&
  ln -s '$tr_irt_nonlinear' 'tr_irt_nonlinear/${re.sub("[^\w\-_]", "_", $tr_irt_nonlinear.element_identifier)}.$gxy2omsext($tr_irt_nonlinear.ext)' &&
#end if
#if $swath_windows_file:
  mkdir swath_windows_file &&
  ln -s '$swath_windows_file' 'swath_windows_file/${re.sub("[^\w\-_]", "_", $swath_windows_file.element_identifier)}.$gxy2omsext($swath_windows_file.ext)' &&
#end if
#if "out_features_FLAG" in str($OPTIONAL_OUTPUTS).split(',')
  mkdir out_features &&
#end if
#if "out_tsv_FLAG" in str($OPTIONAL_OUTPUTS).split(',')
  mkdir out_tsv &&
#end if
#if "out_osw_FLAG" in str($OPTIONAL_OUTPUTS).split(',')
  mkdir out_osw &&
#end if
#if "out_chrom_FLAG" in str($OPTIONAL_OUTPUTS).split(',')
  mkdir out_chrom &&
#end if
#if "out_qc_FLAG" in str($OPTIONAL_OUTPUTS).split(',')
  mkdir out_qc &&
#end if
#if "irt_mzml_FLAG" in str($OPTIONAL_OUTPUTS).split(',')
  mkdir Debugging_irt_mzml &&
#end if
#if "irt_trafo_FLAG" in str($OPTIONAL_OUTPUTS).split(',')
  mkdir Debugging_irt_trafo &&
#end if
#if $adv_opts_cond.adv_opts_selector=='advanced':
  #if $adv_opts_cond.rt_norm:
    mkdir adv_opts_cond.rt_norm &&
    ln -s '$adv_opts_cond.rt_norm' 'adv_opts_cond.rt_norm/${re.sub("[^\w\-_]", "_", $adv_opts_cond.rt_norm.element_identifier)}.$gxy2omsext($adv_opts_cond.rt_norm.ext)' &&
  #end if
#end if

## Main program call

set -o pipefail &&
@EXECUTABLE@ -write_ctd ./ &&
python3 '$__tool_directory__/fill_ctd.py' '@EXECUTABLE@.ctd' '$args_json' '$hardcoded_json' &&
@EXECUTABLE@ -ini @EXECUTABLE@.ctd
-in
'in/${re.sub("[^\w\-_]", "_", $in.element_identifier)}.$gxy2omsext($in.ext)'
-tr
'tr/${re.sub("[^\w\-_]", "_", $tr.element_identifier)}.$gxy2omsext($tr.ext)'
#if $tr_irt:
  -tr_irt
  'tr_irt/${re.sub("[^\w\-_]", "_", $tr_irt.element_identifier)}.$gxy2omsext($tr_irt.ext)'
#end if
#if $tr_irt_nonlinear:
  -tr_irt_nonlinear
  'tr_irt_nonlinear/${re.sub("[^\w\-_]", "_", $tr_irt_nonlinear.element_identifier)}.$gxy2omsext($tr_irt_nonlinear.ext)'
#end if
#if $swath_windows_file:
  -swath_windows_file
  'swath_windows_file/${re.sub("[^\w\-_]", "_", $swath_windows_file.element_identifier)}.$gxy2omsext($swath_windows_file.ext)'
#end if
#if "out_features_FLAG" in str($OPTIONAL_OUTPUTS).split(',')
  -out_features
  'out_features/output.${gxy2omsext("featurexml")}'
#end if
#if "out_tsv_FLAG" in str($OPTIONAL_OUTPUTS).split(',')
  -out_tsv
  'out_tsv/output.${gxy2omsext("tabular")}'
#end if
#if "out_osw_FLAG" in str($OPTIONAL_OUTPUTS).split(',')
  -out_osw
  'out_osw/output.${gxy2omsext("osw")}'
#end if
#if "out_chrom_FLAG" in str($OPTIONAL_OUTPUTS).split(',')
  -out_chrom
  'out_chrom/output.${adv_opts_cond.out_chrom_type}'
#end if
#if "out_qc_FLAG" in str($OPTIONAL_OUTPUTS).split(',')
  -out_qc
  'out_qc/output.${gxy2omsext("json")}'
#end if
#if "irt_mzml_FLAG" in str($OPTIONAL_OUTPUTS).split(',')
  -Debugging:irt_mzml
  'Debugging_irt_mzml/output.${gxy2omsext("mzml")}'
#end if
#if "irt_trafo_FLAG" in str($OPTIONAL_OUTPUTS).split(',')
  -Debugging:irt_trafo
  'Debugging_irt_trafo/output.${gxy2omsext("trafoxml")}'
#end if
#if $adv_opts_cond.adv_opts_selector=='advanced':
  #if $adv_opts_cond.rt_norm:
    -rt_norm
    'adv_opts_cond.rt_norm/${re.sub("[^\w\-_]", "_", $adv_opts_cond.rt_norm.element_identifier)}.$gxy2omsext($adv_opts_cond.rt_norm.ext)'
  #end if
#end if
#if len(str($OPTIONAL_OUTPUTS).split(',')) == 0
  | tee '$stdout'
#end if

## Postprocessing
#if "out_features_FLAG" in str($OPTIONAL_OUTPUTS).split(',')
  && mv 'out_features/output.${gxy2omsext("featurexml")}' '$out_features'
#end if
#if "out_tsv_FLAG" in str($OPTIONAL_OUTPUTS).split(',')
  && mv 'out_tsv/output.${gxy2omsext("tabular")}' '$out_tsv'
#end if
#if "out_osw_FLAG" in str($OPTIONAL_OUTPUTS).split(',')
  && mv 'out_osw/output.${gxy2omsext("osw")}' '$out_osw'
#end if
#if "out_chrom_FLAG" in str($OPTIONAL_OUTPUTS).split(',')
  && mv 'out_chrom/output.${adv_opts_cond.out_chrom_type}' '$out_chrom'
#end if
#if "out_qc_FLAG" in str($OPTIONAL_OUTPUTS).split(',')
  && mv 'out_qc/output.${gxy2omsext("json")}' '$out_qc'
#end if
#if "irt_mzml_FLAG" in str($OPTIONAL_OUTPUTS).split(',')
  && mv 'Debugging_irt_mzml/output.${gxy2omsext("mzml")}' '$Debugging_irt_mzml'
#end if
#if "irt_trafo_FLAG" in str($OPTIONAL_OUTPUTS).split(',')
  && mv 'Debugging_irt_trafo/output.${gxy2omsext("trafoxml")}' '$Debugging_irt_trafo'
#end if
#if "ctd_out_FLAG" in $OPTIONAL_OUTPUTS
  && mv '@EXECUTABLE@.ctd' '$ctd_out'
#end if]]></command>
  <configfiles>
    <inputs name="args_json" data_style="paths"/>
    <configfile name="hardcoded_json"><![CDATA[{"tempDirectory": "\$TMP_DIR", "outer_loop_threads": "1", "log": "log.txt", "threads": "\${GALAXY_SLOTS:-1}", "no_progress": true}]]></configfile>
  </configfiles>
  <inputs>
    <param name="in" argument="-in" type="data" format="mzml,mzxml,sqmass" optional="false" label="Input files separated by blank" help=" select mzml,mzxml,sqmass data sets(s)"/>
    <param name="tr" argument="-tr" type="data" format="pqp,tabular,traml" optional="false" label="transition file ('TraML','tsv','pqp')" help=" select pqp,tabular,traml data sets(s)"/>
    <param name="tr_irt" argument="-tr_irt" type="data" format="pqp,tabular,traml" optional="true" label="transition file ('TraML')" help=" select pqp,tabular,traml data sets(s)"/>
    <param name="tr_irt_nonlinear" argument="-tr_irt_nonlinear" type="data" format="pqp,tabular,traml" optional="true" label="additional nonlinear transition file ('TraML')" help=" select pqp,tabular,traml data sets(s)"/>
    <param name="swath_windows_file" argument="-swath_windows_file" type="data" format="txt" optional="true" label="Optional, tab-separated file containing the SWATH windows for extraction: lower_offset upper_offset" help="Note that the first line is a header and will be skipped select txt data sets(s)"/>
    <param name="sonar" argument="-sonar" type="boolean" truevalue="true" falsevalue="false" checked="false" label="data is scanning SWATH data" help=""/>
    <param name="rt_extraction_window" argument="-rt_extraction_window" type="float" optional="false" value="600.0" label="Only extract RT around this value (-1 means extract over the whole range, a value of 600 means to extract around +/- 300 s of the expected elution)" help=""/>
    <param name="ion_mobility_window" argument="-ion_mobility_window" type="float" optional="false" value="-1.0" label="Extraction window in ion mobility dimension (in milliseconds)" help="This is the full window size, e.g. a value of 10 milliseconds would extract 5 milliseconds on either side"/>
    <param name="mz_extraction_window" argument="-mz_extraction_window" type="float" optional="false" min="0.0" value="50.0" label="Extraction window in Thomson or ppm (see mz_extraction_window_unit)" help=""/>
    <param name="mz_extraction_window_ms1" argument="-mz_extraction_window_ms1" type="float" optional="false" min="0.0" value="50.0" label="Extraction window used in MS1 in Thomson or ppm (see mz_extraction_window_ms1_unit)" help=""/>
    <param name="im_extraction_window_ms1" argument="-im_extraction_window_ms1" type="float" optional="false" value="-1.0" label="Extraction window in ion mobility dimension for MS1 (in milliseconds)" help=""/>
    <section name="Calibration" title="Parameters for the m/z and ion mobility calibration" help="" expanded="false">
      <param name="ms1_im_calibration" argument="-Calibration:ms1_im_calibration" type="boolean" truevalue="true" falsevalue="false" checked="false" label="Whether to use MS1 precursor data for the ion mobility calibration (default = false, uses MS2 / fragment ions for calibration)" help=""/>
      <param name="im_correction_function" argument="-Calibration:im_correction_function" display="checkboxes" type="select" optional="false" label="Type of normalization function for IM calibration" help="">
        <option value="none">none</option>
        <option value="linear" selected="true">linear</option>
        <expand macro="list_string_san" name="im_correction_function"/>
      </param>
      <param name="debug_im_file" argument="-Calibration:debug_im_file" type="text" optional="true" value="" label="Debug file for Ion Mobility calibration" help="">
        <expand macro="list_string_san" name="debug_im_file"/>
      </param>
      <param name="debug_mz_file" argument="-Calibration:debug_mz_file" type="text" optional="true" value="" label="Debug file for m/z calibration" help="">
        <expand macro="list_string_san" name="debug_mz_file"/>
      </param>
    </section>
    <section name="Library" title="Library parameters section" help="" expanded="false">
      <param name="retentionTimeInterpretation" argument="-Library:retentionTimeInterpretation" display="checkboxes" type="select" optional="false" label="How to interpret the provided retention time (the retention time column can either be interpreted to be in iRT, minutes or seconds)" help="">
        <option value="iRT" selected="true">iRT</option>
        <option value="seconds">seconds</option>
        <option value="minutes">minutes</option>
        <expand macro="list_string_san" name="retentionTimeInterpretation"/>
      </param>
      <param name="override_group_label_check" argument="-Library:override_group_label_check" type="boolean" truevalue="true" falsevalue="false" checked="false" label="Override an internal check that assures that all members of the same PeptideGroupLabel have the same PeptideSequence (this ensures that only different isotopic forms of the same peptide can be grouped together in the same label group)" help="Only turn this off if you know what you are doing"/>
      <param name="force_invalid_mods" argument="-Library:force_invalid_mods" type="boolean" truevalue="true" falsevalue="false" checked="false" label="Force reading even if invalid modifications are encountered (OpenMS may not recognize the modification)" help=""/>
    </section>
    <section name="RTNormalization" title="Parameters for the RTNormalization for iRT petides" help="This specifies how the RT alignment is performed and how outlier detection is applied. Outlier detection can be done iteratively (by default) which removes one outlier per iteration or using the RANSAC algorithm" expanded="false">
      <param name="alignmentMethod" argument="-RTNormalization:alignmentMethod" display="checkboxes" type="select" optional="false" label="How to perform the alignment to the normalized RT space using anchor points" help="'linear': perform linear regression (for few anchor points). 'interpolated': Interpolate between anchor points (for few, noise-free anchor points). 'lowess' Use local regression (for many, noisy anchor points). 'b_spline' use b splines for smoothing">
        <option value="linear" selected="true">linear</option>
        <option value="interpolated">interpolated</option>
        <option value="lowess">lowess</option>
        <option value="b_spline">b_spline</option>
        <expand macro="list_string_san" name="alignmentMethod"/>
      </param>
      <param name="outlierMethod" argument="-RTNormalization:outlierMethod" display="checkboxes" type="select" optional="false" label="Which outlier detection method to use (valid: 'iter_residual', 'iter_jackknife', 'ransac', 'none')" help="Iterative methods remove one outlier at a time. Jackknife approach optimizes for maximum r-squared improvement while 'iter_residual' removes the datapoint with the largest residual error (removal by residual is computationally cheaper, use this with lots of peptides)">
        <option value="iter_residual" selected="true">iter_residual</option>
        <option value="iter_jackknife">iter_jackknife</option>
        <option value="ransac">ransac</option>
        <option value="none">none</option>
        <expand macro="list_string_san" name="outlierMethod"/>
      </param>
      <param name="useIterativeChauvenet" argument="-RTNormalization:useIterativeChauvenet" type="boolean" truevalue="true" falsevalue="false" checked="false" label="Whether to use Chauvenet's criterion when using iterative methods" help="This should be used if the algorithm removes too many datapoints but it may lead to true outliers being retained"/>
      <param name="RANSACMaxIterations" argument="-RTNormalization:RANSACMaxIterations" type="integer" optional="false" value="1000" label="Maximum iterations for the RANSAC outlier detection algorithm" help=""/>
      <param name="RANSACMaxPercentRTThreshold" argument="-RTNormalization:RANSACMaxPercentRTThreshold" type="integer" optional="false" value="3" label="Maximum threshold in RT dimension for the RANSAC outlier detection algorithm (in percent of the total gradient)" help="Default is set to 3% which is around +/- 4 minutes on a 120 gradient"/>
      <param name="RANSACSamplingSize" argument="-RTNormalization:RANSACSamplingSize" type="integer" optional="false" value="10" label="Sampling size of data points per iteration for the RANSAC outlier detection algorithm" help=""/>
      <param name="estimateBestPeptides" argument="-RTNormalization:estimateBestPeptides" type="boolean" truevalue="true" falsevalue="false" checked="false" label="Whether the algorithms should try to choose the best peptides based on their peak shape for normalization" help="Use this option you do not expect all your peptides to be detected in a sample and too many 'bad' peptides enter the outlier removal step (e.g. due to them being endogenous peptides or using a less curated list of peptides)"/>
      <param name="InitialQualityCutoff" argument="-RTNormalization:InitialQualityCutoff" type="float" optional="false" value="0.5" label="The initial overall quality cutoff for a peak to be scored (range ca" help="-2 to 2)"/>
      <param name="OverallQualityCutoff" argument="-RTNormalization:OverallQualityCutoff" type="float" optional="false" value="5.5" label="The overall quality cutoff for a peak to go into the retention time estimation (range ca" help="0 to 10)"/>
      <param name="NrRTBins" argument="-RTNormalization:NrRTBins" type="integer" optional="false" value="10" label="Number of RT bins to use to compute coverage" help="This option should be used to ensure that there is a complete coverage of the RT space (this should detect cases where only a part of the RT gradient is actually covered by normalization peptides)"/>
      <param name="MinPeptidesPerBin" argument="-RTNormalization:MinPeptidesPerBin" type="integer" optional="false" value="1" label="Minimal number of peptides that are required for a bin to counted as 'covered'" help=""/>
      <param name="MinBinsFilled" argument="-RTNormalization:MinBinsFilled" type="integer" optional="false" value="8" label="Minimal number of bins required to be covered" help=""/>
      <section name="lowess" title="" help="" expanded="false">
        <param name="span" argument="-RTNormalization:lowess:span" type="float" optional="false" min="0.0" max="1.0" value="0.05" label="Span parameter for lowess" help=""/>
      </section>
      <section name="b_spline" title="" help="" expanded="false">
        <param name="num_nodes" argument="-RTNormalization:b_spline:num_nodes" type="integer" optional="false" min="0" value="5" label="Number of nodes for b spline" help=""/>
      </section>
    </section>
    <section name="Scoring" title="Scoring parameters section" help="" expanded="false">
      <param name="stop_report_after_feature" argument="-Scoring:stop_report_after_feature" type="integer" optional="false" value="5" label="Stop reporting after feature (ordered by quality; -1 means do not stop)" help=""/>
      <param name="rt_normalization_factor" argument="-Scoring:rt_normalization_factor" type="float" optional="false" value="100.0" label="The normalized RT is expected to be between 0 and 1" help="If your normalized RT has a different range, pass this here (e.g. it goes from 0 to 100, set this value to 100)"/>
      <param name="quantification_cutoff" argument="-Scoring:quantification_cutoff" type="float" optional="false" min="0.0" value="0.0" label="Cutoff in m/z below which peaks should not be used for quantification any more" help=""/>
      <param name="write_convex_hull" argument="-Scoring:write_convex_hull" type="boolean" truevalue="true" falsevalue="false" checked="false" label="Whether to write out all points of all features into the featureXML" help=""/>
      <param name="spectrum_addition_method" argument="-Scoring:spectrum_addition_method" display="checkboxes" type="select" optional="false" label="For spectrum addition, either use simple concatenation or use peak resampling" help="">
        <option value="simple" selected="true">simple</option>
        <option value="resample">resample</option>
        <expand macro="list_string_san" name="spectrum_addition_method"/>
      </param>
      <param name="add_up_spectra" argument="-Scoring:add_up_spectra" type="integer" optional="false" min="1" value="1" label="Add up spectra around the peak apex (needs to be a non-even integer)" help=""/>
      <param name="spacing_for_spectra_resampling" argument="-Scoring:spacing_for_spectra_resampling" type="float" optional="false" min="0.0" value="0.005" label="If spectra are to be added, use this spacing to add them up" help=""/>
      <param name="uis_threshold_sn" argument="-Scoring:uis_threshold_sn" type="integer" optional="false" value="-1" label="S/N threshold to consider identification transition (set to -1 to consider all)" help=""/>
      <param name="uis_threshold_peak_area" argument="-Scoring:uis_threshold_peak_area" type="integer" optional="false" value="0" label="Peak area threshold to consider identification transition (set to -1 to consider all)" help=""/>
      <param name="scoring_model" argument="-Scoring:scoring_model" display="checkboxes" type="select" optional="false" label="Scoring model to use" help="">
        <option value="default" selected="true">default</option>
        <option value="single_transition">single_transition</option>
        <expand macro="list_string_san" name="scoring_model"/>
      </param>
      <param name="im_extra_drift" argument="-Scoring:im_extra_drift" type="float" optional="false" min="0.0" value="0.0" label="Extra drift time to extract for IM scoring (as a fraction" help="e.g. 0.25 means 25% extra on each side)"/>
      <param name="strict" argument="-Scoring:strict" type="text" optional="false" value="true" label="Whether to error (true) or skip (false) if a transition in a transition group does not have a corresponding chromatogram" help="">
        <expand macro="list_string_san" name="strict"/>
      </param>
      <section name="TransitionGroupPicker" title="" help="" expanded="false">
        <param name="stop_after_feature" argument="-Scoring:TransitionGroupPicker:stop_after_feature" type="integer" optional="false" value="-1" label="Stop finding after feature (ordered by intensity; -1 means do not stop)" help=""/>
        <param name="min_peak_width" argument="-Scoring:TransitionGroupPicker:min_peak_width" type="float" optional="false" value="-1.0" label="Minimal peak width (s), discard all peaks below this value (-1 means no action)" help=""/>
        <param name="peak_integration" argument="-Scoring:TransitionGroupPicker:peak_integration" display="checkboxes" type="select" optional="false" label="Calculate the peak area and height either the smoothed or the raw chromatogram data" help="">
          <option value="original" selected="true">original</option>
          <option value="smoothed">smoothed</option>
          <expand macro="list_string_san" name="peak_integration"/>
        </param>
        <param name="background_subtraction" argument="-Scoring:TransitionGroupPicker:background_subtraction" display="checkboxes" type="select" optional="false" label="Remove background from peak signal using estimated noise levels" help="The 'original' method is only provided for historical purposes, please use the 'exact' method and set parameters using the PeakIntegrator: settings. The same original or smoothed chromatogram specified by peak_integration will be used for background estimation">
          <option value="none" selected="true">none</option>
          <option value="original">original</option>
          <option value="exact">exact</option>
          <expand macro="list_string_san" name="background_subtraction"/>
        </param>
        <param name="recalculate_peaks" argument="-Scoring:TransitionGroupPicker:recalculate_peaks" type="boolean" truevalue="true" falsevalue="false" checked="true" label="Tries to get better peak picking by looking at peak consistency of all picked peaks" help="Tries to use the consensus (median) peak border if the variation within the picked peaks is too large"/>
        <param name="use_precursors" argument="-Scoring:TransitionGroupPicker:use_precursors" type="boolean" truevalue="true" falsevalue="false" checked="false" label="Use precursor chromatogram for peak picking (note that this may lead to precursor signal driving the peak picking)" help=""/>
        <param name="use_consensus" argument="-Scoring:TransitionGroupPicker:use_consensus" type="boolean" truevalue="true" falsevalue="false" checked="true" label="Use consensus peak boundaries when computing transition group picking (if false, compute independent peak boundaries for each transition)" help=""/>
        <param name="recalculate_peaks_max_z" argument="-Scoring:TransitionGroupPicker:recalculate_peaks_max_z" type="float" optional="false" value="0.75" label="Determines the maximal Z-Score (difference measured in standard deviations) that is considered too large for peak boundaries" help="If the Z-Score is above this value, the median is used for peak boundaries (default value 1.0)"/>
        <param name="minimal_quality" argument="-Scoring:TransitionGroupPicker:minimal_quality" type="float" optional="false" value="-1.5" label="Only if compute_peak_quality is set, this parameter will not consider peaks below this quality threshold" help=""/>
        <param name="resample_boundary" argument="-Scoring:TransitionGroupPicker:resample_boundary" type="float" optional="false" value="15.0" label="For computing peak quality, how many extra seconds should be sample left and right of the actual peak" help=""/>
        <param name="compute_peak_quality" argument="-Scoring:TransitionGroupPicker:compute_peak_quality" type="boolean" truevalue="true" falsevalue="false" checked="false" label="Tries to compute a quality value for each peakgroup and detect outlier transitions" help="The resulting score is centered around zero and values above 0 are generally good and below -1 or -2 are usually bad"/>
        <param name="compute_peak_shape_metrics" argument="-Scoring:TransitionGroupPicker:compute_peak_shape_metrics" type="boolean" truevalue="true" falsevalue="false" checked="false" label="Calculates various peak shape metrics" help="(e.g., tailing) that can be used for downstream QC/QA"/>
        <param name="compute_total_mi" argument="-Scoring:TransitionGroupPicker:compute_total_mi" type="boolean" truevalue="true" falsevalue="false" checked="false" label="Compute mutual information metrics for individual transitions that can be used for OpenSWATH/IPF scoring" help=""/>
        <param name="boundary_selection_method" argument="-Scoring:TransitionGroupPicker:boundary_selection_method" display="checkboxes" type="select" optional="false" label="Method to use when selecting the best boundaries for peaks" help="">
          <option value="largest" selected="true">largest</option>
          <option value="widest">widest</option>
          <expand macro="list_string_san" name="boundary_selection_method"/>
        </param>
        <section name="PeakPickerMRM" title="" help="" expanded="false">
          <param name="sgolay_frame_length" argument="-Scoring:TransitionGroupPicker:PeakPickerMRM:sgolay_frame_length" type="integer" optional="false" value="11" label="The number of subsequent data points used for smoothing" help="This number has to be uneven. If it is not, 1 will be added"/>
          <param name="sgolay_polynomial_order" argument="-Scoring:TransitionGroupPicker:PeakPickerMRM:sgolay_polynomial_order" type="integer" optional="false" value="3" label="Order of the polynomial that is fitted" help=""/>
          <param name="gauss_width" argument="-Scoring:TransitionGroupPicker:PeakPickerMRM:gauss_width" type="float" optional="false" value="30.0" label="Gaussian width in seconds, estimated peak size" help=""/>
          <param name="use_gauss" argument="-Scoring:TransitionGroupPicker:PeakPickerMRM:use_gauss" type="boolean" truevalue="true" falsevalue="false" checked="false" label="Use Gaussian filter for smoothing (alternative is Savitzky-Golay filter)" help=""/>
          <param name="peak_width" argument="-Scoring:TransitionGroupPicker:PeakPickerMRM:peak_width" type="float" optional="false" value="-1.0" label="Force a certain minimal peak_width on the data" help="(e.g. extend the peak at least by this amount on both sides) in seconds. -1 turns this feature off"/>
          <param name="signal_to_noise" argument="-Scoring:TransitionGroupPicker:PeakPickerMRM:signal_to_noise" type="float" optional="false" min="0.0" value="0.1" label="Signal-to-noise threshold at which a peak will not be extended any more" help="Note that setting this too high (e.g. 1.0) can lead to peaks whose flanks are not fully captured"/>
          <param name="write_sn_log_messages" argument="-Scoring:TransitionGroupPicker:PeakPickerMRM:write_sn_log_messages" type="boolean" truevalue="true" falsevalue="false" checked="false" label="Write out log messages of the signal-to-noise estimator in case of sparse windows or median in rightmost histogram bin" help=""/>
          <param name="remove_overlapping_peaks" argument="-Scoring:TransitionGroupPicker:PeakPickerMRM:remove_overlapping_peaks" type="boolean" truevalue="true" falsevalue="false" checked="true" label="Try to remove overlapping peaks during peak picking" help=""/>
          <param name="method" argument="-Scoring:TransitionGroupPicker:PeakPickerMRM:method" display="checkboxes" type="select" optional="false" label="Which method to choose for chromatographic peak-picking (OpenSWATH legacy on raw data, corrected picking on smoothed chromatogram or Crawdad on smoothed chromatogram)" help="">
            <option value="legacy">legacy</option>
            <option value="corrected" selected="true">corrected</option>
            <option value="crawdad">crawdad</option>
            <expand macro="list_string_san" name="method"/>
          </param>
        </section>
        <section name="PeakIntegrator" title="" help="" expanded="false">
          <param name="integration_type" argument="-Scoring:TransitionGroupPicker:PeakIntegrator:integration_type" display="checkboxes" type="select" optional="false" label="The integration technique to use in integratePeak() and estimateBackground() which uses either the summed intensity, integration by Simpson's rule or trapezoidal integration" help="">
            <option value="intensity_sum" selected="true">intensity_sum</option>
            <option value="simpson">simpson</option>
            <option value="trapezoid">trapezoid</option>
            <expand macro="list_string_san" name="integration_type"/>
          </param>
          <param name="baseline_type" argument="-Scoring:TransitionGroupPicker:PeakIntegrator:baseline_type" display="checkboxes" type="select" optional="false" label="The baseline type to use in estimateBackground() based on the peak boundaries" help="A rectangular baseline shape is computed based either on the minimal intensity of the peak boundaries, the maximum intensity or the average intensity (base_to_base)">
            <option value="base_to_base" selected="true">base_to_base</option>
            <option value="vertical_division">vertical_division</option>
            <option value="vertical_division_min">vertical_division_min</option>
            <option value="vertical_division_max">vertical_division_max</option>
            <expand macro="list_string_san" name="baseline_type"/>
          </param>
          <param name="fit_EMG" argument="-Scoring:TransitionGroupPicker:PeakIntegrator:fit_EMG" type="boolean" truevalue="true" falsevalue="false" checked="false" label="Fit the chromatogram/spectrum to the EMG peak model" help=""/>
        </section>
      </section>
      <section name="DIAScoring" title="" help="" expanded="false">
        <param name="dia_extraction_window" argument="-Scoring:DIAScoring:dia_extraction_window" type="float" optional="false" min="0.0" value="0.05" label="DIA extraction window in Th or ppm" help=""/>
        <param name="dia_extraction_unit" argument="-Scoring:DIAScoring:dia_extraction_unit" display="checkboxes" type="select" optional="false" label="DIA extraction window unit" help="">
          <option value="Th" selected="true">Th</option>
          <option value="ppm">ppm</option>
          <expand macro="list_string_san" name="dia_extraction_unit"/>
        </param>
        <param name="dia_centroided" argument="-Scoring:DIAScoring:dia_centroided" type="boolean" truevalue="true" falsevalue="false" checked="false" label="Use centroided DIA data" help=""/>
        <param name="dia_byseries_intensity_min" argument="-Scoring:DIAScoring:dia_byseries_intensity_min" type="float" optional="false" min="0.0" value="300.0" label="DIA b/y series minimum intensity to conside" help=""/>
        <param name="dia_byseries_ppm_diff" argument="-Scoring:DIAScoring:dia_byseries_ppm_diff" type="float" optional="false" min="0.0" value="10.0" label="DIA b/y series minimal difference in ppm to conside" help=""/>
        <param name="dia_nr_isotopes" argument="-Scoring:DIAScoring:dia_nr_isotopes" type="integer" optional="false" min="0" value="4" label="DIA number of isotopes to conside" help=""/>
        <param name="dia_nr_charges" argument="-Scoring:DIAScoring:dia_nr_charges" type="integer" optional="false" min="0" value="4" label="DIA number of charges to conside" help=""/>
        <param name="peak_before_mono_max_ppm_diff" argument="-Scoring:DIAScoring:peak_before_mono_max_ppm_diff" type="float" optional="false" min="0.0" value="20.0" label="DIA maximal difference in ppm to count a peak at lower m/z when searching for evidence that a peak might not be monoisotopic" help=""/>
      </section>
      <section name="EMGScoring" title="" help="" expanded="false">
        <param name="max_iteration" argument="-Scoring:EMGScoring:max_iteration" type="integer" optional="false" value="10" label="Maximum number of iterations using by Levenberg-Marquardt algorithm" help=""/>
      </section>
      <section name="Scores" title="" help="" expanded="false">
        <param name="use_shape_score" argument="-Scoring:Scores:use_shape_score" type="boolean" truevalue="true" falsevalue="false" checked="true" label="Use the shape score (this score measures the similarity in shape of the transitions using a cross-correlation)" help=""/>
        <param name="use_coelution_score" argument="-Scoring:Scores:use_coelution_score" type="boolean" truevalue="true" falsevalue="false" checked="true" label="Use the coelution score (this score measures the similarity in coelution of the transitions using a cross-correlation)" help=""/>
        <param name="use_rt_score" argument="-Scoring:Scores:use_rt_score" type="boolean" truevalue="true" falsevalue="false" checked="true" label="Use the retention time score (this score measure the difference in retention time)" help=""/>
        <param name="use_library_score" argument="-Scoring:Scores:use_library_score" type="boolean" truevalue="true" falsevalue="false" checked="true" label="Use the library score" help=""/>
        <param name="use_intensity_score" argument="-Scoring:Scores:use_intensity_score" type="boolean" truevalue="true" falsevalue="false" checked="true" label="Use the intensity score" help=""/>
        <param name="use_nr_peaks_score" argument="-Scoring:Scores:use_nr_peaks_score" type="boolean" truevalue="true" falsevalue="false" checked="true" label="Use the number of peaks score" help=""/>
        <param name="use_total_xic_score" argument="-Scoring:Scores:use_total_xic_score" type="boolean" truevalue="true" falsevalue="false" checked="true" label="Use the total XIC score" help=""/>
        <param name="use_total_mi_score" argument="-Scoring:Scores:use_total_mi_score" type="boolean" truevalue="true" falsevalue="false" checked="false" label="Use the total MI score" help=""/>
        <param name="use_sn_score" argument="-Scoring:Scores:use_sn_score" type="boolean" truevalue="true" falsevalue="false" checked="true" label="Use the SN (signal to noise) score" help=""/>
        <param name="use_mi_score" argument="-Scoring:Scores:use_mi_score" type="boolean" truevalue="true" falsevalue="false" checked="true" label="Use the MI (mutual information) score" help=""/>
        <param name="use_dia_scores" argument="-Scoring:Scores:use_dia_scores" type="boolean" truevalue="true" falsevalue="false" checked="true" label="Use the DIA (SWATH) scores" help="If turned off, will not use fragment ion spectra for scoring"/>
        <param name="use_ms1_correlation" argument="-Scoring:Scores:use_ms1_correlation" type="boolean" truevalue="true" falsevalue="false" checked="false" label="Use the correlation scores with the MS1 elution profiles" help=""/>
        <param name="use_sonar_scores" argument="-Scoring:Scores:use_sonar_scores" type="boolean" truevalue="true" falsevalue="false" checked="false" label="Use the scores for SONAR scans (scanning swath)" help=""/>
        <param name="use_ion_mobility_scores" argument="-Scoring:Scores:use_ion_mobility_scores" type="boolean" truevalue="true" falsevalue="false" checked="false" label="Use the scores for Ion Mobility scans" help=""/>
        <param name="use_ms1_fullscan" argument="-Scoring:Scores:use_ms1_fullscan" type="boolean" truevalue="true" falsevalue="false" checked="false" label="Use the full MS1 scan at the peak apex for scoring (ppm accuracy of precursor and isotopic pattern)" help=""/>
        <param name="use_ms1_mi" argument="-Scoring:Scores:use_ms1_mi" type="boolean" truevalue="true" falsevalue="false" checked="true" label="Use the MS1 MI score" help=""/>
        <param name="use_uis_scores" argument="-Scoring:Scores:use_uis_scores" type="boolean" truevalue="true" falsevalue="false" checked="false" label="Use UIS scores for peptidoform identification" help=""/>
      </section>
    </section>
    <expand macro="adv_opts_macro">
      <param name="rt_norm" argument="-rt_norm" type="data" format="trafoxml" optional="true" label="RT normalization file (how to map the RTs of this run to the ones stored in the library)" help="If set, tr_irt may be omitted select trafoxml data sets(s)"/>
      <param name="sort_swath_maps" argument="-sort_swath_maps" type="boolean" truevalue="true" falsevalue="false" checked="false" label="Sort input SWATH files when matching to SWATH windows from swath_windows_file" help=""/>
      <param name="enable_ms1" argument="-enable_ms1" type="boolean" truevalue="true" falsevalue="false" checked="true" label="Extract the precursor ion trace(s) and use for scoring if present" help=""/>
      <param name="enable_ipf" argument="-enable_ipf" type="boolean" truevalue="true" falsevalue="false" checked="true" label="Enable additional scoring of identification assays using IPF (see online documentation)" help=""/>
      <param name="out_chrom_type" type="select" optional="false" label="File type of output out_chrom (Also output all computed chromatograms output in mzML (chrom.mzML) or sqMass (SQLite format))">
        <option value="mzML">mzml</option>
        <option value="sqMass">sqmass</option>
      </param>
      <param name="min_upper_edge_dist" argument="-min_upper_edge_dist" type="float" optional="false" value="0.0" label="Minimal distance to the upper edge of a Swath window to still consider a precursor, in Thomson" help=""/>
      <param name="extra_rt_extraction_window" argument="-extra_rt_extraction_window" type="float" optional="false" min="0.0" value="0.0" label="Output an XIC with a RT-window by this much large" help="(e.g. to visually inspect a larger area of the chromatogram)"/>
      <param name="mz_extraction_window_unit" argument="-mz_extraction_window_unit" display="checkboxes" type="select" optional="false" label="Unit for mz extraction" help="">
        <option value="Th">Th</option>
        <option value="ppm" selected="true">ppm</option>
        <expand macro="list_string_san" name="mz_extraction_window_unit"/>
      </param>
      <param name="mz_extraction_window_ms1_unit" argument="-mz_extraction_window_ms1_unit" display="checkboxes" type="select" optional="false" label="Unit of the MS1 m/z extraction window" help="">
        <option value="ppm" selected="true">ppm</option>
        <option value="Th">Th</option>
        <expand macro="list_string_san" name="mz_extraction_window_ms1_unit"/>
      </param>
      <param name="use_ms1_ion_mobility" argument="-use_ms1_ion_mobility" type="boolean" truevalue="true" falsevalue="false" checked="true" label="Also perform precursor extraction using the same ion mobility window as for fragment ion extraction" help=""/>
      <param name="matching_window_only" argument="-matching_window_only" type="boolean" truevalue="true" falsevalue="false" checked="false" label="Assume the input data is targeted / PRM-like data with potentially overlapping DIA windows" help="Will only attempt to extract each assay from the *best* matching DIA window (instead of all matching windows)"/>
      <param name="irt_mz_extraction_window" argument="-irt_mz_extraction_window" type="float" optional="false" min="0.0" value="50.0" label="Extraction window used for iRT and m/z correction in Thomson or ppm (see irt_mz_extraction_window_unit)" help=""/>
      <param name="irt_mz_extraction_window_unit" argument="-irt_mz_extraction_window_unit" display="checkboxes" type="select" optional="false" label="Unit for mz extraction" help="">
        <option value="Th">Th</option>
        <option value="ppm" selected="true">ppm</option>
        <expand macro="list_string_san" name="irt_mz_extraction_window_unit"/>
      </param>
      <param name="irt_im_extraction_window" argument="-irt_im_extraction_window" type="float" optional="false" value="-1.0" label="Ion mobility extraction window used for iRT (in 1/K0 or milliseconds)" help=""/>
      <param name="min_rsq" argument="-min_rsq" type="float" optional="false" value="0.95" label="Minimum r-squared of RT peptides regression" help=""/>
      <param name="min_coverage" argument="-min_coverage" type="float" optional="false" value="0.6" label="Minimum relative amount of RT peptides to keep" help=""/>
      <param name="split_file_input" argument="-split_file_input" type="boolean" truevalue="true" falsevalue="false" checked="false" label="The input files each contain one single SWATH (alternatively: all SWATH are in separate files)" help=""/>
      <param name="use_elution_model_score" argument="-use_elution_model_score" type="boolean" truevalue="true" falsevalue="false" checked="false" label="Turn on elution model score (EMG fit to peak)" help=""/>
      <param name="readOptions" argument="-readOptions" display="checkboxes" type="select" optional="false" label="Whether to run OpenSWATH directly on the input data, cache data to disk first or to perform a datareduction step first" help="If you choose cache, make sure to also set tempDirectory">
        <option value="normal" selected="true">normal</option>
        <option value="cache">cache</option>
        <option value="cacheWorkingInMemory">cacheWorkingInMemory</option>
        <option value="workingInMemory">workingInMemory</option>
        <expand macro="list_string_san" name="readOptions"/>
      </param>
      <param name="mz_correction_function" argument="-mz_correction_function" type="select" optional="false" label="Use the retention time normalization peptide MS2 masses to perform a mass correction (linear, weighted by intensity linear or quadratic) of all spectra" help="">
        <option value="none" selected="true">none</option>
        <option value="regression_delta_ppm">regression_delta_ppm</option>
        <option value="unweighted_regression">unweighted_regression</option>
        <option value="weighted_regression">weighted_regression</option>
        <option value="quadratic_regression">quadratic_regression</option>
        <option value="weighted_quadratic_regression">weighted_quadratic_regression</option>
        <option value="weighted_quadratic_regression_delta_ppm">weighted_quadratic_regression_delta_ppm</option>
        <option value="quadratic_regression_delta_ppm">quadratic_regression_delta_ppm</option>
        <expand macro="list_string_san" name="mz_correction_function"/>
      </param>
      <param name="extraction_function" argument="-extraction_function" display="checkboxes" type="select" optional="false" label="Function used to extract the signal" help="">
        <option value="tophat" selected="true">tophat</option>
        <option value="bartlett">bartlett</option>
        <expand macro="list_string_san" name="extraction_function"/>
      </param>
      <param name="batchSize" argument="-batchSize" type="integer" optional="false" min="0" value="1000" label="The batch size of chromatograms to process (0 means to only have one batch, sensible values are around 250-1000)" help=""/>
      <param name="ms1_isotopes" argument="-ms1_isotopes" type="integer" optional="false" min="0" value="3" label="The number of MS1 isotopes used for extraction" help=""/>
      <param name="force" argument="-force" type="boolean" truevalue="true" falsevalue="false" checked="false" label="Overrides tool-specific checks" help=""/>
      <param name="test" argument="-test" type="hidden" optional="false" value="False" label="Enables the test mode (needed for internal use only)" help="">
        <expand macro="list_string_san" name="test"/>
      </param>
    </expand>
    <param name="OPTIONAL_OUTPUTS" type="select" optional="true" multiple="true" label="Optional outputs">
      <option value="out_features_FLAG">out_features (output file)</option>
      <option value="out_tsv_FLAG">out_tsv (TSV output file (mProphet-compatible TSV file))</option>
      <option value="out_osw_FLAG">out_osw (OSW output file (PyProphet-compatible SQLite file))</option>
      <option value="out_chrom_FLAG">out_chrom (Also output all computed chromatograms output in mzML (chrom.mzML) or sqMass (SQLite format))</option>
      <option value="out_qc_FLAG">out_qc (Optional QC meta data (charge distribution in MS1))</option>
      <option value="irt_mzml_FLAG">irt_mzml (Chromatogram mzML containing the iRT peptides)</option>
      <option value="irt_trafo_FLAG">irt_trafo (Transformation file for RT transform)</option>
      <option value="ctd_out_FLAG">Output used ctd (ini) configuration file</option>
    </param>
  </inputs>
  <outputs>
    <data name="out_features" label="${tool.name} on ${on_string}: out_features" format="featurexml">
      <filter>OPTIONAL_OUTPUTS is not None and "out_features_FLAG" in OPTIONAL_OUTPUTS</filter>
    </data>
    <data name="out_tsv" label="${tool.name} on ${on_string}: out_tsv" format="tabular">
      <filter>OPTIONAL_OUTPUTS is not None and "out_tsv_FLAG" in OPTIONAL_OUTPUTS</filter>
    </data>
    <data name="out_osw" label="${tool.name} on ${on_string}: out_osw" format="osw">
      <filter>OPTIONAL_OUTPUTS is not None and "out_osw_FLAG" in OPTIONAL_OUTPUTS</filter>
    </data>
    <data name="out_chrom" label="${tool.name} on ${on_string}: out_chrom" format="mzml">
      <change_format>
        <when input="adv_opts_cond.out_chrom_type" value="sqMass" format="sqmass"/>
      </change_format>
      <filter>OPTIONAL_OUTPUTS is not None and "out_chrom_FLAG" in OPTIONAL_OUTPUTS</filter>
    </data>
    <data name="out_qc" label="${tool.name} on ${on_string}: out_qc" format="json">
      <filter>OPTIONAL_OUTPUTS is not None and "out_qc_FLAG" in OPTIONAL_OUTPUTS</filter>
    </data>
    <data name="Debugging_irt_mzml" label="${tool.name} on ${on_string}: Debugging:irt_mzml" format="mzml">
      <filter>OPTIONAL_OUTPUTS is not None and "irt_mzml_FLAG" in OPTIONAL_OUTPUTS</filter>
    </data>
    <data name="Debugging_irt_trafo" label="${tool.name} on ${on_string}: Debugging:irt_trafo" format="trafoxml">
      <filter>OPTIONAL_OUTPUTS is not None and "irt_trafo_FLAG" in OPTIONAL_OUTPUTS</filter>
    </data>
    <data name="stdout" format="txt" label="${tool.name} on ${on_string}: stdout">
      <filter>OPTIONAL_OUTPUTS is None</filter>
    </data>
    <data name="ctd_out" format="xml" label="${tool.name} on ${on_string}: ctd">
      <filter>OPTIONAL_OUTPUTS is not None and "ctd_out_FLAG" in OPTIONAL_OUTPUTS</filter>
    </data>
  </outputs>
  <tests>
    <expand macro="autotest_OpenSwathWorkflow"/>
    <expand macro="manutest_OpenSwathWorkflow"/>
  </tests>
  <help><![CDATA[Complete workflow to run OpenSWATH


For more information, visit http://www.openms.de/doxygen/release/2.6.0/html/UTILS_OpenSwathWorkflow.html]]></help>
  <expand macro="references"/>
</tool>
