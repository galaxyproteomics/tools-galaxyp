<tool id="msspsmtable_split" name="Split tabular data" version="1.1">
    <description>on column user selects</description>
    <requirements>
        <requirement type="package" version="2.5">msstitch</requirement>
    </requirements>
    <command detect_errors="exit_code">
        mkdir msspsmtable_split_output;
        msspsmtable split -i '$input' --splitcol $splitcol -d msspsmtable_split_output
    </command>
    
    <inputs>
        <param name="input" type="data" format="tabular" label="Tabular table with header"/>
        <param name="splitcol" type="integer" value="" label="Number of column to split on"/>
    </inputs>
    
    <outputs>
        <collection name="splitpsms" type="list" label="Split PSM tables">
            <discover_datasets pattern="(?P&lt;designation&gt;.+)\.tsv" ext="tabular" directory="msspsmtable_split_output" />
        </collection>
    </outputs>
    <tests>
        <test>
            <param name="input" value="minimal_psmtable_merged.txt" />
            <param name="splitcol" value="2" />
            <output_collection name="splitpsms" type="list">
                <element name="Set1" file="set1_splitpsms.txt" />
                <element name="Set2" file="set2_splitpsms.txt" />
            </output_collection>
        </test>
    </tests>
    <help>
        Takes a tabular dataset (e.g. PSM table) with a header and splits it into multiple files.
        Each line is put in a file corresponding to the categories defined in 
        the column indicated by the user.
    </help>
</tool>
