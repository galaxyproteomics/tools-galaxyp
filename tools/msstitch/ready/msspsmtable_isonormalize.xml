<tool id="msspsmtable_isonormalize" name="Isobaric ratio normalization">
    <requirements>
        <requirement type="package" version="2.2">msstitch</requirement>
    </requirements>
    <description>median centering on PSM table</description>
    <command>
        msspsmtable isonormalize -i '$psmtable' --minint $minint --isobquantcolpattern '$isobpattern'
        -o '$output' --denompatterns '$denominators'
        #if $mzidnormalize
	--medianpsms '$mzidnormalize'
        #end if
    </command>
    <inputs>
      <param name="psmtable" type="data" format="mzidtsv" label="Search table from MSGF+" help="Must contain quant information and protein groups" />
      <param name="mzidnormalize" type="data" format="mzidtsv" label="Optional second PSM table to generate the medians from" help="Must contain quant information" optional="true" />
      <param name="minint" type="float" value="0.1" min="0.1" label="Minimum raw quantification intensity" />
      <param name="isobpattern" type="text" label="Pattern for isobaric quant columns in PSM table" help="Regex to find quant columns, e.g. tmt10plex, itraq8plex, plex"/>
      <param name="denominators" type="text" label="Isobaric protein quantification denominator regex patterns" help="Separate with space, e.g. _126 _127" />
    </inputs>
    
    <outputs>
        <data format="mzidtsv" name="output"/>
    </outputs>
    
    <help>
	    Takes a multifile TSV table with MSGF+ data and collapses it into one file.
	    Headers of the individual files are checked to make sure they are identical,
	    which should be implicit in multifile datasets.
    </help>
<stdio>
    <exit_code range="1:" level="fatal" description="Isobaric quantification exited with an error." />
</stdio>

</tool>
