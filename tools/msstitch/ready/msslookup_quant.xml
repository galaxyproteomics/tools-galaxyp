<tool id="msslookup_quant" name="Create lookup table with quant data">
    <requirements>
        <requirement type="package" version="2.2">msstitch</requirement>
    </requirements>  
  
    <description>using openMS isobaric quant and kronik MS1 quant</description>
    
    <command>
	    <!-- FIXME if block for multiple conditional select? -->
            cp '$dbfile' spec_lookup.sql
	    #if quant.types.value == "ms1"
	    &&
	    #end if
	    #if quant.types.value == "iso"
	    &&
	    msslookup isoquant -i
            #for $fn in $quants.keys()
            '$quants[$fn]'
            #end for
            --spectra 
            #for $sfn in $spectra.keys()
            '$spectra[$sfn]'
            #end for
            --dbfile spec_lookup.sql
	    #end if


    </command>
     
    <inputs>
	    <conditional name="quant">
		    <param name="types" type="select" display="checkboxes">
			    <option value="ms1">MS1 (kronik)</option>
			    <option value="iso">Isobaric (openMS)</option>
		    </param>
		    <!-- FIXME how to do conditional with 2 selected? -->
		    <when value="ms1">
			    <param name="isoquant" type="data_collection" format="consxml" label="Quant data in consensusXML" />
			    <param name="rttol" type="float" label="Retention time lookup tolerance value in seconds" value="5" />
			    <param name="mztol" type="float" label="m/z lookup tolerance value" value="20" />
			    <param name="mztoltype" type="select" label="m/z lookup tolerance unit">
				    <option value="ppm">ppm</option>
				    <option value="Da">Da</option>
			   </param>
		    </when>
		    <when value="iso">
			   <param name="quants" type="data_collection" format="kr" label="Quant data from Kronik" />
		    </when>
	    </conditional>
    </inputs>
    
    <outputs>
        <data format="mslookupsql" name="output"/>
    </outputs>

    <help>
	    This stores quantification data from OpenMS Isobaric Analyzer and Kronik tools in an SQLite lookup database
	    for later use in PSM quantification.
    </help>

</tool>
