<tool id="prottable_bestpeptide" name="Get best peptide">
    <requirements>
        <requirement type="package" version="2.2">msstitch</requirement>
    </requirements>
    <description>for each protein in table</description>
    <command>
	    mssprottable bestpeptide -i '$proteins' -o '$output' --peptable '$peptable'
	    --scorecolpattern "$scorecol"
            #if $minlog
            --logscore
            #end if
	    #if $proteincolumn.value
	    --protcol $proteincolumn
	    #end if
    </command>
    
    <inputs>
      <param name="proteins" type="data" format="prottable" label="Protein table"/>
      <param name="peptable" type="data" format="peptsv" label="Peptide table"/>
      <param name="proteincolumn" type="integer" label="Peptide table column with protein accessions if not standard Master protein column" optional="true" />
      <param name="scorecol" type="text" label="Regular expression pattern to determine scorecolumn in peptide file" help="E.g. ^q-value if -log10 is used, or svm" />
      <param name="minlog" type="boolean" label="Use -log10 of a peptide's score" help="E.g. when using q-values" truevalue="true" falsevalue="false"/>
    </inputs>
    
    <outputs>
        <data format="prottable" name="output"/>
    </outputs>

    <help>
	    Bestpeptide finds for each protein in the supplied protein table the best 
	    scoring matching peptide from a peptide table. It outputs the protein table
	    with a new column "Q-score", which contains te score of the best peptide,
	    which can be expressed using the -log10 of the peptide score as well.
    </help>
</tool>
