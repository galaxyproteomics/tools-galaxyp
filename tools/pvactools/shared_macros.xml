<macros>
    <token name="@TOOL_VERSION@">6.0.2</token>
    <token name="@VERSION_SUFFIX@">1</token>
    <token name="@AA_RE@">[ACDEFGHIKLMNPQRSTVWY]</token>
    <token name="@PROBLEM_AA_RE@">(@AA_RE@+|@AA_RE@:-?\d+)</token>
    <token name="@PROBLEM_AA_ARG_RE@">@PROBLEM_AA_RE@(,@PROBLEM_AA_RE@)*</token>
    <token name="@PREPARE_ALLELES_INPUT@"><![CDATA[
        #if $alleles.allelesrc == 'entry'
            #set $alleles_input = ''
            #if $alleles.allele_text != ''
                #set $alleles_input = ','.join(str($alleles.allele_text).strip().split())
            #end if

            #if $alleles.allele_select != 'None'
                #set $select_alleles = ','.join(str($alleles.allele_select).strip().split())
                #if $alleles_input == ''
                    #set $alleles_input = $select_alleles
                #else
                    #set $alleles_input = ','.join([$alleles_input, $select_alleles])
                #end if
            #end if
        #end if
    ]]></token>
    <xml name="allele_inputs">
        <conditional name="alleles">
           <param name="allelesrc" type="select" label="Alleles">
               <option value="history">From history</option>
               <option value="entry">Entered</option>
           </param>
           <when value="history">
               <param name="allele_file" type="data" format="txt,tabular,tsv" label="Alleles file">
                   <help>The dataset should have one allele per line.</help>
               </param>
           </when>
           <when value="entry">
               <param name="allele_text" type="text" label="Alleles" optional="true">
                   <help>Enter alleles separated by white space.</help>
               </param>
               <expand macro="allele_list" />
           </when>
        </conditional>
    </xml>
    <xml name="citations">
        <citations>
            <citation type="doi">10.1158/2326-6066.CIR-19-0401</citation>
            <yield />
        </citations>
    </xml>
</macros>
