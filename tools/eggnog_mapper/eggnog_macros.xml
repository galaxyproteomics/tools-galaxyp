<?xml version="1.0"?>
<macros>
   <token name="@VERSION@">1.0.3</token>
   <xml name="citations">
        <citations>
            <citation type="doi">10.1093/nar/gkv1248</citation>
        </citations>
    </xml>
    <xml name="requirements">
        <requirements>
            <requirement type="package" version="@VERSION@">eggnog-mapper</requirement>
        </requirements>
    </xml>
    <xml name="version_command">
        <version_command>emapper.py --version</version_command>
    </xml>
    <xml name="data_manager_params">
        <param name="test" type="hidden" value="false" />
        <param name="diamond_database" type="boolean" truevalue="" falsevalue="-D" checked="true" label="Install the diamond database"/>
        <param argument="dbs" type="select" multiple="true" label="eggNOG HMM databases to download. If none are selected only diamond can be used'">
            <option value="arch" selected="true">Archea  arch_1 (arch)</option>
            <option value="bact" selected="true">Bacteria bact_50 (bact)</option>
            <option value="euk" selected="true">Eukaryote euk_500 (euk)</option>
            <option value="NOG" selected="true">All organisms (NOG)</option>
            <option value="aciNOG">Acidobacteria (aciNOG)</option>
            <option value="acidNOG">Acidobacteriia (acidNOG)</option>
            <option value="acoNOG">Aconoidasida (acoNOG)</option>
            <option value="actNOG">Actinobacteria (actNOG)</option>
            <option value="agaNOG">Agaricales (agaNOG)</option>
            <option value="agarNOG">Agaricomycetes (agarNOG)</option>
            <option value="apiNOG">Apicomplexa (apiNOG)</option>
            <option value="aproNOG">Proteobacteria_alpha (aproNOG)</option>
            <option value="aquNOG">Aquificae (aquNOG)</option>
            <option value="arNOG">Archaea (arNOG)</option>
            <option value="arcNOG">Archaeoglobi (arcNOG)</option>
            <option value="artNOG">Arthropoda (artNOG)</option>
            <option value="arthNOG">Arthrodermataceae (arthNOG)</option>
            <option value="ascNOG">Ascomycota (ascNOG)</option>
            <option value="aveNOG">Aves (aveNOG)</option>
            <option value="bacNOG">Bacilli (bacNOG)</option>
            <option value="bactNOG">Bacteria (bactNOG)</option>
            <option value="bacteNOG">Bacteroidia (bacteNOG)</option>
            <option value="basNOG">Basidiomycota (basNOG)</option>
            <option value="bctoNOG">Bacteroidetes (bctoNOG)</option>
            <option value="biNOG">Bilateria (biNOG)</option>
            <option value="bproNOG">Proteobacteria_beta (bproNOG)</option>
            <option value="braNOG">Brassicales (braNOG)</option>
            <option value="carNOG">Carnivora (carNOG)</option>
            <option value="chaNOG">Chaetomiaceae (chaNOG)</option>
            <option value="chlNOG">Chlorobi (chlNOG)</option>
            <option value="chlaNOG">Chlamydiae (chlaNOG)</option>
            <option value="chloNOG">Chloroflexi (chloNOG)</option>
            <option value="chlorNOG">Chloroflexi (chlorNOG)</option>
            <option value="chloroNOG">Chlorophyta (chloroNOG)</option>
            <option value="chorNOG">Chordata (chorNOG)</option>
            <option value="chrNOG">Chromadorea (chrNOG)</option>
            <option value="cloNOG">Clostridia (cloNOG)</option>
            <option value="cocNOG">Coccidia (cocNOG)</option>
            <option value="creNOG">Crenarchaeota (creNOG)</option>
            <option value="cryNOG">Cryptosporidiidae (cryNOG)</option>
            <option value="cyaNOG">Cyanobacteria (cyaNOG)</option>
            <option value="cytNOG">Cytophagia (cytNOG)</option>
            <option value="debNOG">Debaryomycetaceae (debNOG)</option>
            <option value="defNOG">Deferribacteres (defNOG)</option>
            <option value="dehNOG">Dehalococcoidetes (dehNOG)</option>
            <option value="deiNOG">Deinococcusthermus (deiNOG)</option>
            <option value="delNOG">delta/epsilon (delNOG)</option>
            <option value="dipNOG">Diptera (dipNOG)</option>
            <option value="dotNOG">Dothideomycetes (dotNOG)</option>
            <option value="dproNOG">Proteobacteria_delta (dproNOG)</option>
            <option value="droNOG">Drosophilidae (droNOG)</option>
            <option value="eproNOG">Proteobacteria_epsilon (eproNOG)</option>
            <option value="eryNOG">Erysipelotrichi (eryNOG)</option>
            <option value="euNOG">Eukaryotes (euNOG)</option>
            <option value="eurNOG">Euryarchaeota (eurNOG)</option>
            <option value="euroNOG">Eurotiomycetes (euroNOG)</option>
            <option value="eurotNOG">Eurotiales (eurotNOG)</option>
            <option value="fiNOG">Fishes (fiNOG)</option>
            <option value="firmNOG">Firmicutes (firmNOG)</option>
            <option value="flaNOG">Flavobacteriia (flaNOG)</option>
            <option value="fuNOG">Fungi (fuNOG)</option>
            <option value="fusoNOG">Fusobacteria (fusoNOG)</option>
            <option value="gproNOG">Proteobacteria_gamma (gproNOG)</option>
            <option value="haeNOG">Haemosporida (haeNOG)</option>
            <option value="halNOG">Halobacteria (halNOG)</option>
            <option value="homNOG">Hominidae (homNOG)</option>
            <option value="hymNOG">Hymenoptera (hymNOG)</option>
            <option value="hypNOG">Hypocreales (hypNOG)</option>
            <option value="inNOG">Insects (inNOG)</option>
            <option value="kinNOG">Kinetoplastida (kinNOG)</option>
            <option value="lepNOG">Lepidoptera (lepNOG)</option>
            <option value="lilNOG">Liliopsida (lilNOG)</option>
            <option value="maNOG">Mammals (maNOG)</option>
            <option value="magNOG">Magnaporthales (magNOG)</option>
            <option value="meNOG">Animals (meNOG)</option>
            <option value="metNOG">Methanobacteria (metNOG)</option>
            <option value="methNOG">Methanococci (methNOG)</option>
            <option value="methaNOG">Methanomicrobia (methaNOG)</option>
            <option value="necNOG">Nectriaceae (necNOG)</option>
            <option value="negNOG">Negativicutes (negNOG)</option>
            <option value="nemNOG">Nematodes (nemNOG)</option>
            <option value="onyNOG">Onygenales (onyNOG)</option>
            <option value="opiNOG">Opisthokonts (opiNOG)</option>
            <option value="perNOG">Peronosporales (perNOG)</option>
            <option value="plaNOG">Planctomycetes (plaNOG)</option>
            <option value="pleNOG">Pleosporales (pleNOG)</option>
            <option value="poaNOG">Poales (poaNOG)</option>
            <option value="prNOG">Primates (prNOG)</option>
            <option value="proNOG">Proteobacteria (proNOG)</option>
            <option value="rhaNOG">Rhabditida (rhaNOG)</option>
            <option value="roNOG">Rodents (roNOG)</option>
            <option value="sacNOG">Saccharomycetaceae (sacNOG)</option>
            <option value="saccNOG">Saccharomycetes (saccNOG)</option>
            <option value="sorNOG">Sordariales (sorNOG)</option>
            <option value="sordNOG">Sordariomycetes (sordNOG)</option>
            <option value="sphNOG">Sphingobacteriia (sphNOG)</option>
            <option value="spiNOG">Spirochaetes (spiNOG)</option>
            <option value="spriNOG">Supraprimates (spriNOG)</option>
            <option value="strNOG">Streptophyta (strNOG)</option>
            <option value="synNOG">Synergistetes (synNOG)</option>
            <option value="tenNOG">Tenericutes (tenNOG)</option>
            <option value="thaNOG">Thaumarchaeota (thaNOG)</option>
            <option value="theNOG">Thermoplasmata (theNOG)</option>
            <option value="therNOG">Thermotogae (therNOG)</option>
            <option value="thermNOG">Thermococci (thermNOG)</option>
            <option value="treNOG">Tremellales (treNOG)</option>
            <option value="veNOG">Vertebrates (veNOG)</option>
            <option value="verNOG">Verrucomicrobia (verNOG)</option>
            <option value="verrNOG">Verrucomicrobiae (verrNOG)</option>
            <option value="virNOG">Viridiplantae (virNOG)</option>
        </param>
    </xml>
    <xml name="data_manager_outputs">
        <outputs>
            <data name="out_file" format="data_manager_json" label="${tool.name}"/>
        </outputs>
    </xml>
    <token name="@DOWNLOAD_CMD@"><![CDATA[
## tool should set install_path
#if $test == 'true'
#import os.path
#set $install_path = $os.path.join($os.path.dirname($__tool_directory__), 'test-data/cached_locally')
#end if
#if $dbs:
#set $eggnogdbs = ' '.join(str($dbs).split(','))
#else
#set $eggnogdbs = 'none'
#end if
mkdir -p '${install_path}' &&
download_eggnog_data.py 
  $diamond_database -y -q 
#if $test == 'true'
  -s
#end if
  --data_dir '$install_path' 
  $eggnogdbs &&
python '${__tool_directory__}/data_manager_eggnog.py' --config_file '$out_file' --install_path '$install_path' --dbs '$dbs'
    ]]></token>
    <xml name="data_manager_test">
        <!--
        <test>
            <param name="test" value="true"/>
            <param name="diamond_database" value="false"/>
            <param name="dbs" value="thaNOG"/>
            <output name="out_file">
                <assert_contents>
                    <has_text text="eggnog_mapper_db" />
                </assert_contents>
            </output>
        </test>
        -->
    </xml>
</macros>
