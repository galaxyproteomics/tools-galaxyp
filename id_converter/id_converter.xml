<tool id="IDconverter" name="ID Converter" version="0.1.0">
    <description>converts identifiers which are of a different type/source to another type of identifiers and create the identifier lists.
    </description>
    <requirements>
    </requirements>
    <stdio>
        <exit_code range="1:" />
    </stdio>
    <command><![CDATA[
        Rscript $__tool_directory__/id_converter_UniProt.R
        "$idti.idtypein"
        #if $input.ids == "text"
            "$input.txt"
            "list"
        #else
            "$input.file,$input.ncol,$input.header"
            "file"
        #end if
        "$idto.idtypeout"
        "$output"
        $__tool_directory__/ID_mapping_Uniprot_HomoSapiens_20170809.txt
        $__tool_directory__/Nextprot_Uniprot_id_mapping_file.txt
        
    ]]></command>
    <inputs>
        <conditional name="input" >
            <param name="ids" type="select" label="Provide your identifiers (copy/paste or ID list from a file (e.g. table)) " >
                <option value="text">Copy/paste your identifiers</option>
                <option value="file">Input file containing your identifiers</option>
            </param>
            <when value="text" >
                <param name="txt" type="text" label="Copy/paste your identifiers" help='IDs must be separated by spaces into the form field, for example: P31946 P62258' />
            </when>
            <when value="file" >
                <param name="file" type="data" format="txt,tabular" label="Choose a file that contains your list of IDs" help="" />
                <param name="header" type="boolean" checked="true" truevalue="true" falsevalue="false" label="Does your input file contain header?" />
                <param name="ncol" type="text" label="The column number of IDs to map" help='For example, fill in "c1" if it is the first column, "c2" if it is the second column and so on' />                
            </when>
        </conditional>
	    <conditional name="idti" >
            <param name="idtypein" type="select" label="Select type/source of identifier of your list" >
		        <option value="neXtProt_ID" >neXtProt ID</option>
		        <option value="UNIPROT_AC" >Uniprot accession number</option>
		        <option value="UNIPROT_ID" >Uniprot ID</option>
		        <option value="GeneID_EntrezGene" >Entrez gene ID</option>
		        <option value="RefSeq" >RefSeq (NCBI) protein</option>
		        <option value="GI_number" >GI (NCBI GI number) ID assigned to each sequence record processed by NCBI</option>
		        <option value="PDB" >Protein DataBank ID</option>
		        <option value="GO_ID" >GOterms (Gene Ontology) ID</option>
		        <option value="PIR" >Protein Information Resource ID</option>
		        <option value="OMIM" >OMIM (Online Mendelian Inheritance in Man database) ID</option>
		        <option value="UniGene" >Unigene ID</option>
		        <option value="Ensembl.ENSG" >Ensembl gene ID</option>
		        <option value="Ensembl.ENST" >Ensembl transcript ID</option>
		        <option value="Ensembl.ENSP" >Ensembl protein ID</option>
	        </param>
	        <when value="neXtProt_ID" >
	        </when>
	        <when value="UNIPROT_AC" >
	        </when>
	        <when value="UNIPROT_ID" >
	        </when>
	        <when value="GeneID_EntrezGene" >
	        </when>
	        <when value="RefSeq" >
	        </when>
	        <when value="GI_number" >
	        </when>
	        <when value="PDB" >
	        </when>
	        <when value="GO_ID" >
	        </when>
	        <when value="PIR" >
	        </when>
	        <when value="OMIM" >
	        </when>
	        <when value="UniGene" >
	        </when>
	        <when value="Ensembl.ENSG" >
	        </when>
	        <when value="Ensembl.ENST" >
	        </when>
	        <when value="Ensembl.ENSP" >
	        </when>
	    </conditional>
	    <section name="idto" title="Target type of IDs" expanded="True" >
            <param name="idtypeout" type="select" label="Target type of IDs you would like to map to" display="checkboxes" multiple="True" >
		        <option value="neXtProt_ID" >neXtProt ID</option>
		        <option value="UNIPROT_AC" >Uniprot accession number</option>
		        <option value="UNIPROT_ID" >Uniprot ID</option>
		        <option value="GeneID_EntrezGene" >Entrez gene ID</option>
		        <option value="RefSeq" >RefSeq (NCBI) protein</option>
		        <option value="GI_number" >GI (NCBI GI number) ID assigned to each sequence record processed by NCBI</option>
		        <option value="PDB" >Protein DataBank ID</option>
		        <option value="GO_ID" >GOterms (Gene Ontology) ID</option>
		        <option value="PIR" >Protein Information Resource ID</option>
		        <option value="OMIM" >OMIM (Online Mendelian Inheritance in Man database) ID</option>
		        <option value="UniGene" >Unigene ID</option>
		        <option value="Ensembl.ENSG" >Ensembl gene ID</option>
		        <option value="Ensembl.ENST" >Ensembl transcript ID</option>
		        <option value="Ensembl.ENSP" >Ensembl protein ID</option>
	        </param>
	    </section>
    </inputs>
    <outputs>
        <data name="output" format="tabular" />
    </outputs>
    <tests>
        <test>
            <conditional name="input">
                <param name="ids" value="file" />
                <param name="file" value="UnipIDs.txt" />
                <param name="header" value="false" />
                <param name="ncol" value="c1" />
            </conditional>
            <conditional name="idti">
                <param name="idtypein" value="UNIPROT_AC" />
            </conditional>
            <section name="idto">
                <param name="idtypeout" value="Ensembl.ENSP,Ensembl.ENSG,neXtProt_ID" />
            </section>
                <output name="output" file="output2.txt" />
        </test>
    </tests>
    <help><![CDATA[
This tool converts a list of IDs to another identifier type, select the source and target type from the dropdown menus above (see below supported source and target types).

After choosing the type of input IDs, you can choose one or more types of IDs you would like to map to. 

If your input is a list of IDs or a single-column file, the tool will return a file containing the mapped IDs.

If your input is a multiple-column file, the mapped IDs column(s) will be added at the end of the input file.

**Available databases**

* neXtProt ID

* Uniprot accession number

* Uniprot ID

* Entrez gene ID

* RefSeq (NCBI) protein

* GI (NCBI GI number) ID assigned to each sequence record processed by NCBI

* Protein DataBank ID

* GOterms (Gene Ontology) ID

* Protein Information Resource ID

* OMIM (Online Mendelian Inheritance in Man database) ID

* Unigene ID

* Ensembl gene ID

* Ensembl transcript ID

* Ensembl protein ID
 
    ]]></help>
    <citations>
    </citations>
</tool>
