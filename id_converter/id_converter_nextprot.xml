<tool id="mappingID" name="ID Converter" version="0.1.0">
    <description>converts identifiers which are of a different type/source to another type of identifiers and create the identifier lists.
    </description>
    <requirements>
    </requirements>
    <stdio>
        <exit_code range="1:" />
    </stdio>
    <command><![CDATA[
        Rscript $__tool_directory__/id_converter_UniProt.R
        "$idti.idtypein"
        #if $input.ids == "text"
            "$input.txt"
            "list"
        #else
            "$input.file,$input.ncol,$input.header"
            "file"
        #end if
        "$idto.idtypeout"
        "$output"
        
    ]]></command>
    <inputs>
        <conditional name="input" >
            <param name="ids" type="select" label="Provide your identifiers (copy/paste or ID list from a multi-column file (e.g. table)) " >
                <option value="text">Copy/paste your identifiers</option>
                <option value="file">Input file containing your identifiers</option>
            </param>
            <when value="text" >
                <param name="txt" type="text" label="Copy/paste your identifiers" help='IDs must be separated by spaces into the form field, for example:P31946 P62258' />
            </when>
            <when value="file" >
                <param name="file" type="data" format="txt,tabular" label="Input file containing your identifiers" help="" />
                <param name="header" type="boolean" checked="true" truevalue="true" falsevalue="false" label="Does your input file contain header?" />
                <param name="ncol" type="text" label="The column number of IDs to map" help='For example, fill in "c1" if it is the first column, "c2" if it is the second column and so on' />                
            </when>
        </conditional>
	    <conditional name="idti" >
            <param name="idtypein" type="select" label="Select type/source of identifier of your list" >
		        <option value="neXtProt" >neXtProt</option>
		        <option value="UniProt" >UniProt</option>
		        <option value="ENSG" >ENSG Ensembl gene identifiers</option>
		        <option value="ENSP" >ENSP Ensembl protein identifiers</option>
		        <option value="ENST" >ENST Ensembl transcript identifiers</option>
		        <option value="geneID" >NCBI GeneID gene accession numbers</option>
		        <option value="HGNC" >HGNC gene accession numbers</option>
		        <option value="IPI" >IPI protein identifiers</option>
		        <option value="MGI" >MGI mouse gene accession numbers</option>
		        <option value="RS" >NCBI RefSeq protein accession numbers</option>
		        <!--option value="GI" >NCBI GI numbers</option>
		        <option value="GO" >GOterms identifiers</option>
		        <option value="PIR" >Protein Information Resource ID</option>
		        <option value="UniGene" >UniGene identifiers</option-->
	        </param>
	        <when value="neXtProt" >
	        </when>
	        <when value="ENSG" >
	        </when>
	        <when value="ENSP" >
	        </when>
	        <when value="ENST" >
	        </when>
	        <when value="geneID" >
	        </when>
	        <when value="HGNC" >
	        </when>
	        <when value="IPI" >
	        </when>
	        <when value="MGI" >
	        </when>
	        <when value="RS" >
	        </when>
	    </conditional>
	    <section name="idto" title="Target type of IDs" expanded="True" >
            <param name="idtypeout" type="select" label="Target type of IDs you would like to map to" display="checkboxes" multiple="True" >
		        <option value="neXtProt" >neXtProt</option>
		        <option value="UniProt" >UniProt</option>
		        <option value="ENSG" >ENSG Ensembl gene identifiers</option>
		        <option value="ENSP" >ENSP Ensembl protein identifiers</option>
    		    <option value="ENST" >ENST Ensembl transcript identifiers</option>
	    	    <option value="geneID" >NCBI GeneID gene accession numbers</option>
	    	    <option value="HGNC" >HGNC gene accession numbers</option>
	    	    <option value="IPI" >IPI protein identifiers</option>
	    	    <option value="MGI" >MGI mouse gene accession numbers</option>
	    	    <option value="RS" >NCBI RefSeq protein accession numbers</option>
	    	    <!--option value="GI" >NCBI GI numbers</option>
		        <option value="GO" >GOterms identifiers</option>
		        <option value="PIR" >Protein Information Resource ID</option>
		        <option value="UniGene" >UniGene identifiers</option-->
	        </param>
	        <when value="neXtProt" >
	        </when>
	        <when value="ENSG" >
	        </when>
	        <when value="ENSP" >
	        </when>
	        <when value="ENST" >
	        </when>
	        <when value="geneID" >
	        </when>
	        <when value="HGNC" >
	        </when>
	        <when value="IPI" >
	        </when>
	        <when value="MGI" >
	        </when>
	        <when value="RS" >
	        </when>
	    </section>
    </inputs>
    <outputs>
        <data name="output" format="tabular" />
    </outputs>
    <tests>
        <test>
            <conditional name="input">
                <param name="ids" value="file" />
                <param name="file" value="UnipIDs.txt" />
                <param name="header" value="false" />
                <param name="ncol" value="c1" />
            </conditional>
            <conditional name="idti">
                <param name="idtypein" value="UniProt" />
            </conditional>
            <section name="idto">
                <param name="idtypeout" value="ENSG,ENSP,HGNC" />
            </section>
            <output name="output" file="id_mapping_output.txt" />
        </test>
    </tests>
    <help><![CDATA[
This tool converts a list of IDs to another identifier type, select the source and target type from the dropdown menus above (see below supported source and target types).

After choosing the type of input IDs, you can choose one or more types of IDs you would like to map to. 

If your input is a list of IDs or a single-column file, the tool will return a file containing the mapped IDs.

If your input is a multiple-column file, the mapped IDs column(s) will be added at the end of the input file.

**Available databases** 

* neXtProt

* UniProt

* Ensembl gene identifiers

* Ensembl protein identifiers

* Ensembl transcript identifiers

* NCBI GeneID gene accession numbers

* HGNC gene accession numbers

* IPI protein identifiers

* MGI mouse gene accession numbers

* NCBI RefSeq protein accession numbers
 
    ]]></help>
    <citations>
    </citations>
</tool>
